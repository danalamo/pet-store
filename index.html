<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        html {
            font-size: 16px;
        }        
        input, select {
            padding: .5rem;
            height: 2rem;
            border-radius: 2px;
            border: 1px solid #ccc;
            vertical-align: top;
            background: none;
            -webkit-appearance: none;
            min-width: 100px;            
        }
        #filters-container {
            padding: 1rem;
        }
        .icon-right {
            padding-right: 2.5rem;
        }
        #filters-container i.fa {
            position: relative;            
            padding: 0.4rem;
            width: 2rem;
            height: 2rem;
            vertical-align: bottom;
            border: 1px solid #ccc;
            border-radius: 2px;
            left: -2.25rem;
            z-index: -1;
        }
        .card {
            border: 1px solid #cccccc;
            padding: 1rem;
            border-radius: 2px;
            margin: .5rem;
            width: 240px;
            /* float: left; */
            display: inline-block;
        }
        .card .name { 
            display: inline-block;
            float: left;
        }
        .card .price { 
            display: inline-block;            
            float: right;
        }
        .card img {
            width: 100%;
        }
        .card .image {
            min-height: 180px;
            overflow: hidden;
        }
        .center {
            margin: auto;
            text-align: center;
        }
        
    </style>
</head>
<body>
    <section id="filters-container" class="center">
        <input name="search" type="text" placeholder="Search" class="icon-right" />
        <i class="fa fa-search"></i>
        <select name="sort" class="icon-right">
            <option value="">Sort Ascending By</option>
            <option value="name">Name</option>
            <option value="price">Price</option>
            <option value="color">Color</option>
        </select>
        <i class="fa fa-chevron-down"></i>
    </section>

    <section id="products-container" class="center">
        <div class="product card">            
            <div class="image">
                <img src="//www.untamedscience.com/science/wp-content/uploads/2014/01/brown-bear.png" alt="" />
            </div>
            <div class="details">
                <span class="name">Ursidae</span>
                <span class="price">99</span>
                <input type="number" value="1" min="1" max="100" />
            <div class="filter">
                <select name="sort" class="icon-right">
                    <option value="">Sort Ascending By</option>
                    <option value="name">Name</option>
                    <option value="price">Price</option>
                    <option value="color">Color</option>
                </select>
                <i class="fa fa-chevron-down"></i>
            </div>
        </div>

    </section>

    <section id="products-container" class="center"></section>

    <script>
        var store = {
            name: "my sexy store",
            products: [
                {"name":"Ursidae",          "price":99.99,     "tags":["big", "wild"],            "color":"blue",    "image":"//d2gg9evh47fn9z.cloudfront.net/800px_COLOURBOX1049419.jpg" },
                {"name":"Canis Lupus",      "price":50,        "tags":["medium", "tame"],         "color":"blue",    "image":"//upload.wikimedia.org/wikipedia/commons/6/65/Loxodonta_africana_in_Serengeti.jpg" },
                {"name":"Felis catus",      "price":87.65,     "tags":["small", "tame"],          "color":"red",     "image":"//upload.wikimedia.org/wikipedia/commons/6/65/Loxodonta_africana_in_Serengeti.jpg" },
                {"name":"Loxodonta",        "price":9000,      "tags":["big", "wild"],            "color":"red",     "image":"//upload.wikimedia.org/wikipedia/commons/6/65/Loxodonta_africana_in_Serengeti.jpg" },
                {"name":"Panthera Tigris",  "price":750.4567,  "tags":["big", "wild"],            "color":"yellow",  "image":"//upload.wikimedia.org/wikipedia/commons/6/65/Loxodonta_africana_in_Serengeti.jpg" },
                {"name":"Cetacea",          "price":10000,     "tags":["big", "wild"],            "color":"yellow",  "image":"//upload.wikimedia.org/wikipedia/commons/6/65/Loxodonta_africana_in_Serengeti.jpg" },
                {"name":"Aquila",           "price":550.5,     "tags":["small", "wild", "tame"],  "color":"yellow",  "image":"//upload.wikimedia.org/wikipedia/commons/6/65/Loxodonta_africana_in_Serengeti.jpg" },
                {"name":"Lacertilia",       "price":13.75,     "tags":["small", "wild", "tame"],  "color":"green",   "image":"//upload.wikimedia.org/wikipedia/commons/6/65/Loxodonta_africana_in_Serengeti.jpg" }
            ]            
        };

        

        $(function(){    
            var $search = $('[name=search]');
            var $sort = $('[name="sort"]');
            var $toggle = $('#filter-toggler');
            var searchValue = '', sortValue = ''; 
            var $productsContainer = $('#products-container'); 
            renderProducts();
            
            $search.on('input', function(val) {
                searchValue = $search.val().toLowerCase();                 
                renderProducts();
            });

            $sort.on('change', function() {
                sortValue = $sort.val();     
                renderProducts();
            });

            function renderProducts() {
                $productsContainer.html('');
                var filteredProducts = store.products;
                
                if (searchValue != '') {
                    filteredProducts = store.products.filter(function(product) { 
                        var nameMatch = product.name.toLowerCase().indexOf(searchValue) != -1;
                        var tagMatch = product.tags.some(function(tag) {
                            return tag.toLowerCase().indexOf(searchValue) != -1;
                        });
                        
                        return tagMatch || nameMatch;
                    });    
                }

                if (sortValue != '') {
                    filteredProducts = filteredProducts.sort(function(a, b) {
                        return a[sortValue] > b[sortValue];
                    });
                }

                $.each(filteredProducts, function(i, product) {            
                    var $product = [
                            '<div class="product card">',
                                '<div class="image">',
                                    '<img src="'+ product.image +'" alt="'+ product.name +' image" />',
                                '</div>',
                                '<div class="details">',                                    
                                    '<span class="name">'+ product.name +'</span>', 
                                    '<span class="price">$'+ toDecimal(product.price) +'</span>',                                    
                                    '<div class="add-to-cart">',
                                        'QTY <input type="number" value="1" min="1" max="100" />',
                                        '<button>Add to Cart</button>',
                                    '</div>',
                                '</div>',
                            '</div>'
                        ].join('');

                    $productsContainer.append($product);
                });
            }

            function toDecimal(number) {
                return number.toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,");
            }
        });
    </script>
</body>
</html>